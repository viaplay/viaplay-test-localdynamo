var dependencyParser = require( './dependencyParser.js' )();
module.exports = function() {
	var pub = {};
	var InjectableComponent = function( fn ) {
		var usages = [],
			dependencies = dependencyParser.getDependencies( fn );
		Object.defineProperty( this, 'dependencies', {
			get: function() { return dependencies; }
		} );
		Object.defineProperty( this, 'fn', {
			get: function() { return fn; }
		} );
		Object.defineProperty( this, 'isTransient', {
			get: function() { return dependencies.hasParentName; }
		} );
		Object.defineProperty( this, 'usages', {
			get: function() { return usages.slice( 0 ); }
		} );
		this.addUsage = function( parentName ) {
			if( usages.indexOf( parentName ) < 0 && parentName !== 'resolver.js' )
				usages.push( parentName );
			return this;
		};
	};
	pub.get = function( fn ) {
		return new InjectableComponent( fn );
	};
	return pub;
};
